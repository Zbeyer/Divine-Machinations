G_Cards = [
	{
		rank: "-",
		name: "Spark Dew",
		type: "item",
		sub: "Alchemy",
		price: "3gp / 1L",
		image: "https://i.imgur.com/IlCuCbk.jpeg",
		description: `
			Liquid fuel used for most things. Refined from elemental salts, lumin essance, and other common trade goods.
		`
	},
	{
		rank: "-",
		name: "Glimmer Water",
		type: "item",
		sub: "Alchemy",
		price: "2gp / 1L",
		image: "https://i.imgur.com/nwqd6lZ.jpeg",
		description: `
			Liquid magic. Used in most magitech. Refined from elemental salts, lumin essance, and other common trade goods.
		`
	},
	{
		rank: "-",
		name: "Aurex Crucible",
		type: "item",
		sub: "Smithing",
		price: "20gp",image: "https://i.imgur.com/DUrjRw4.jpeg",		description: `
			Powered by spark dew. Turns ore into ingots.
		`
	},
	{
		rank: "-",
		name: "Crystal Vase",
		type: "item",
		sub: "Alchemy",
		price: "10gp",
		image: "https://i.imgur.com/fzmlIZR.jpeg",
		description: `
			AEather quartz and water requid to work. Produces 1 leter of Lumin essence after 30d. AEather quartz consumed.
		`
	},
	{
		rank: "-",
		name: "Lumin Essence",
		type: "item",
		sub: "Alchemy",
		price: "1gp / 3L",
		image: "https://i.imgur.com/q636rjD.jpeg",
		description: `
			Base liquid of most potions. Safe to drink or inject.
		`
	},
	{
		rank: "-",
		name: "HP Potion I",
		type: "item",
		sub: "Potion",
		price: "10gp",
		image: "https://i.imgur.com/Ezo77WC.jpeg",
		description: `
			Regain 1d6 + 6 Hit Points.
		`
	},
	{
		rank: "-",
		name: "HP Potion II",
		type: "item",
		sub: "Potion",
		price: "20gp",
		image: "https://i.imgur.com/5S5AhuU.jpeg",
		description: `
			Regain 2d6 + 12 Hit Points.
		`
	},
	{
		rank: "-",
		name: "HP Potion III",
		type: "item",
		sub: "Potion",
		price: "30gp",
		image: "https://i.imgur.com/93ILXEL.jpeg",
		description: `
			Regain 4d6 + 24 Hit Points.
		`
	},
	{
		rank: "-",
		name: "Crimson Radiance",
		type: "item",
		sub: "Flora",
		price: "10gp",
		image: "https://i.imgur.com/q857qxI.jpeg",
		description: `
			Uncommon field flower. Steeped in 1 cL of lumin essance (like tea) for 1 hour to produce 1 cL of HP Potion I. Item is consumed.
		`
	},
	{
		rank: "-",
		name: "Scarletveil Shroom",
		type: "item",
		sub: "Flora",
		price: "20gp",
		image: "https://i.imgur.com/mypG5Q5.jpeg",
		description: `
			Mostly found in caves. Steeped in 1 cL of HP potion I for 2 hours produces 1 cL of HP Potion II. Item is consumed.
		`
	},
	{
		rank: "-",
		name: "Vitalis Fern",
		type: "item",
		sub: "Flora",
		price: "30gp",
		image: "https://i.imgur.com/ckiATg3.jpeg",
		description: `
			Rare deep forest plant. Steeped in 1 cL of HP potion II for 3 hours produces 1 cL of HP Potion III. Item is consumed.
		`
	},
	{
		rank: "-",
		name: "Mana Potion I",
		type: "item",
		sub: "Potion",
		price: "10gp",
		image: "https://i.imgur.com/J6ylJlN.jpeg",
		description: `
			As a Bonus Action, inject this into a magitech's power stone. A spell slot of first level is immediatly restored.
		`
	},
	{
		rank: "-",
		name: "Azuralis Bloom",
		type: "item",
		sub: "Flora",
		price: "8gp",
		image: "https://i.imgur.com/hG7W3UW.jpeg",
		description: `
			Steeped in 1 cL of lumin essance (like tea) for 3 hours to produce 1 cL of Mana Potion I. Item is consumed.
		`
	},
	{
		rank: "-",
		name: "Single",
		type: "item",
		sub: "Potion",
		image: "https://i.imgur.com/Xt9MphA.jpeg",
		description: `
			1 mL of fluid—as a Bonus Action—you can drink, feed, or inject this into a willing or unconscious creature or object (including yourself) within 5ft. Potion's price and effects are described seperately.
		`
	},
	{
		rank: "-",
		name: "Dose",
		type: "item",
		sub: "Potion",
		image: "https://i.imgur.com/fXzgoHV.jpeg",
		description: `
			1 minute to prepare 5 singles. Often bought by average consumers.
		`
	},
	{
		rank: "-",
		name: "Case",
		type: "item",
		sub: "Potion",
		image: "https://i.imgur.com/7G32W2E.jpeg",
		description: `
			8 singles in a small container. Often carried by field medics.
		`
	},
	{
		rank: "-",
		name: "Box",
		type: "item",
		sub: "Potion",
		image: "https://i.imgur.com/4WDQYEB.jpeg",
		description: `
			24 singles in a larger container. Often carried by military logistic troops.
		`
	},
	{
		rank: "-",
		name: "Bullet",
		type: "item",
		sub: "Ammo",
		price: "1gp for 30",
		image: "https://i.imgur.com/kinjF4r.jpeg",
		description: `
			Weapon damage
		`
	},
	{
		rank: "-",
		name: "Premium Bullet",
		type: "item",
		sub: "Ammo",
		price: "1gp for 10",
		image: "https://i.imgur.com/BxjjF9c.jpeg",
		description: `
			Weapon damage x 2
		`
	},
	{
		rank: "-",
		name: "Death Shot",
		type: "item",
		sub: "Ammo",
		price: "1GP per Shot",
		image: "https://i.imgur.com/nZ3IEwD.jpeg",
		description: `
			Weapon damage + 2d6 necrotic
		`
	},
	{
		rank: "-",
		name: "Fire Bomb",
		type: "item",
		sub: "Ammo",
		price: "1GP per Shot",
		image: "https://i.imgur.com/i9kfUa1.jpeg",
		description: `
			Level 3 Fireball spell shot
			<hr>
			To hit: DEX attack<br>
			<hr>
			If hit:<br>
			Spell save DC: 18<br>
			Spell attack modifier 0<br>
		`
	},
	{
		rank: "-",
		name: "Anti-Personel Round",
		type: "item",
		sub: "Ammo",
		price: "1GP per Shot",
		image: "https://i.imgur.com/RR5QIpB.jpeg",
		description: `
			Weapon damage + 2d6 poison.
		`
	},
	{
		rank: "-",
		name: "Solar Shot",
		type: "item",
		sub: "Ammo",
		price: "1GP per Shot",
		image: "https://i.imgur.com/fwuGUeK.jpeg",
		description: `
			Weapon damage + 2d6 radiant.
		`
	},
	{
		rank: "-",
		name: "Concussive Round",
		type: "item",
		sub: "Ammo",
		price: "1GP per Shot",
		image: "https://i.imgur.com/9IIKK5U.jpeg",
		description: `
			Weapon damage + 1d6 force.
		`
	},
	{
		rank: "-",
		name: "Charged Shot",
		type: "item",
		sub: "Ammo",
		price: "1GP per Shot",
		image: "https://i.imgur.com/LZRqsTk.jpeg",
		description: `
			Level 3 Lightning Bolt spell shot
			<hr>
			To hit: DEX attack<br>
			<hr>
			If hit:<br>
			Spell save DC: 18<br>
			Spell attack modifier 0<br>
		`
	},
	{
		rank: "1",
		name: "AEther Quartz",
		type: "item",
		sub: "Power Stone",
		price: "10GP",
		image: "https://i.imgur.com/LPJYbPx.jpeg",
		description: `
			<strong>Infusion</strong>: 1
		`
	},
	{
		rank: "2",
		name: "Skyfire Opal",
		type: "item",
		sub: "Power Stone",
		price: "20GP",
		image: "https://i.imgur.com/f5LV6Zw.jpeg",
		description: `
			<strong>Infusion</strong>: 2
		`
	},
	{
		rank: "3",
		name: "Voidstone",
		type: "item",
		sub: "Power Stone",
		price: "50GP",
		image: "https://i.imgur.com/melACO3.jpeg",
		description: `
			<strong>Infusion</strong>: 3
		`
	},
	{
		rank: "4",
		name: "Arcanite Crystal",
		type: "item",
		sub: "Power Stone",
		price: "120GP",
		image: "https://i.imgur.com/6OCYI6k.jpeg",
		description: `
			<strong>Infusion</strong>: 4
		`
	},
	{
		rank: "5",
		name: "Etherium Shard",
		type: "item",
		sub: "Power Stone",
		price: "250GP",
		image: "https://i.imgur.com/7HINHAH.jpeg",
		description: `
			<strong>Infusion</strong>: 5
		`
	},
	{
		rank: "6",
		name: "Soulfire Emerald",
		type: "item",
		sub: "Power Stone",
		price: "300GP",
		image: "https://i.imgur.com/KsFYyb6.jpeg",
		description: `
			<strong>Infusion</strong>: 6
		`
	},
	{
		rank: "1",
		name: "Servitorb",
		type: "creature",
		sub: "construct",
		image: "https://i.imgur.com/71UwASG.jpeg",
		price: "WIZ 1 | AC: 10",
		description: `
			Constructs are immune to poison.<br>
		`
	},
	{
		rank: "1",
		name: "Cephalith Worker",
		type: "creature",
		sub: "Abberation",
		image: "https://i.imgur.com/Qhxlial.jpeg",
		price: "HP: 4 | AC: 10 | Small | WIZ 1",
		description: `
		STR 10 | CON 09 | DEX 09<br>
		INT 07 | WIS 09 | CHA 03<br>
		Walk: 20 | Burrow: 20<br>
		Resistant to cold.<br>
		<i>Tunnellers. The start of the cephalith lifecycle.</i>
		`
	},
	{
		rank: "2",
		name: "Cephalith Crawler",
		type: "creature",
		sub: "Aberration",
		image: "https://i.imgur.com/ceiOrJS.jpeg",
		price: "HP: 8 | AC: 10 | Small | WIZ 2",
		description: `
		STR 10 | CON 10 | DEX 11<br>
		INT 09 | WIS 11 | CHA 05<br>
		Walk: 30<br>
		Resistant to cold.<br>
		<br>
		<i>Basic Cephalith, hasn't transformed into something worse, yet.</i>
		`
	},
	{
		rank: "3",
		name: "Cephalith Flyer",
		type: "creature",
		sub: "Aberration",
		image: "https://i.imgur.com/AWxjYx8.jpeg",
		price: "HP 12 | AC: 12 | Med | WIZ 2",
		description: `
		STR 09 | CON 10 | DEX 13<br>
		INT 11 | WIS 12 | CHA 07<br>
		Fly: 45<br>
		Resistant to cold.<br>
		Ignores difficult terrain.<br>
		<i>Scouts.</i>
		`
	},
	{
		rank: "5",
		name: "Cephalith Overseer",
		type: "creature",
		sub: "Aberration",
		image: "https://i.imgur.com/9gXxoBl.jpeg",
		price: "HP: 20 | AC: 15 | Large | WIZ 3",
		description: `
		Walk: 25<br>
		STR 08 | CON 11 | DEX 09<br>
		INT 15 | WIS 13 | CHA 10<br>
		Saves: INT | WIS <br> 
		Resistant to cold.<br>
		Command is a bonus action.<br>
		Telepathy 40ft.<br>
		<i>Psionic commanders.</i>
		`
	},
	{
		rank: "8",
		name: "Cephalith Tank",
		type: "creature",
		sub: "Aberration",
		image: "https://i.imgur.com/YJqj4He.jpeg",
		price: "HP: 72 | AC: 18 | Large | WIZ 2",
		description: `
		Walk: 25<br>
		STR 15 | CON 13 | DEX 09<br>
		INT 07 | WIS 11 | CHA 05<br>
		Saves: STR | CON <br> 
		Resistant to cold.<br>
		Resistant to non-magical.<br>
		<i>Protectors of the hive.</i>
		`
	},
	{
		rank: "1",
		name: "Taunt",
		type: "keyword",
		sub: "Action",
		price: "30 Red Elemental Salts",
		image: "https://i.imgur.com/x83nL0T.jpeg",
		description: `
		Enemies within 30 ft. have a DC 15 WIS check to target anyone but the user as a primary for a weapon attack or spell.<br>
		Enemies within 30 ft. have a DC 15 WIS check to use an item.
		`
	},
	{
		rank: "2",
		name: "Frost Brand",
		type: "keyword",
		sub: "Passive",
		image: "https://i.imgur.com/wMscna6.jpeg",
		price: "50 Blue Elemental Salts",
		description: `
		Deal an extra 1d6 Cold damage. <br>
		Resistance to Fire damage. <br>
		In freezing temperatures, the weapon sheds light 10/10 <br>
		Once an hour you may extinguish all nonmagical flames within 30 feet.
		`
	},
	{
		rank: "1",
		name: "Flame Toung",
		type: "keyword",
		sub: "Bonus",
		price: "30 Red Elemental Salts",
		image: "https://i.imgur.com/KhymlTW.jpeg",
		description: `
		Deal an extra 2d6 fire damage. <br>
		Light 40/40 <br>
		`
	},
	{
		rank: "1",
		name: "Magic Item +1",
		type: "keyword",
		sub: "Enhancement",
		price: "30GP",
		image: "https://i.imgur.com/hj1uzm7.jpeg",
		description: `
			Magic Item +1
		`
	},
	{
		rank: "2",
		name: "Magic Item +2",
		type: "keyword",
		sub: "Enhancement",
		price: "80GP",
		image: "https://i.imgur.com/wKLHrJa.jpeg",
		description: `
			Magic Item +2
		`
	},
	{
		rank: "3",
		name: "Magic Item +3",
		type: "keyword",
		sub: "Enhancement",
		price: "210GP",
		image: "https://i.imgur.com/81HXu8G.jpeg",
		description: `
			Magic Item +3
		`
	},
	{
		rank: "4",
		name: "Magic Item +4",
		type: "keyword",
		sub: "Enhancement",
		price: "550GP",
		image: "https://i.imgur.com/iq4ffQx.jpeg",
		description: `
			Magic Item +4
		`
	},
	{
		rank: "5",
		name: "Magic Item +5",
		type: "keyword",
		sub: "Enhancement",
		price: "1,500GP",
		image: "https://i.imgur.com/2T4TCFr.jpeg",
		description: `
			Magic Item +5
		`
	},
	{
		rank: "6",
		name: "Magic Item +6",
		type: "keyword",
		sub: "Enhancement",
		price: "5,000GP",
		image: "https://i.imgur.com/ZNlBR5m.jpeg",
		description: `
			Magic Item +6
		`
	},
	{
		rank: "0",
		type: "ability",
		sub: "Aberration",
		price: "Action",
		name: "Warping Grasp",
		description: `
			Target must succeed on a DC 10 Wisdom save or have disadvantage on its next attack roll.
		`
	},
	{
		rank: "0",
		type: "ability",
		sub: "Aberration",
		price: "Passive",
		name: "Maddening Whisper",
		description: `
			Creates faint, unsettling whispers audible to creatures within 10 feet.
		`
	},
	{
		rank: "0",
		type: "ability",
		sub: "Aberration",
		price: "Bonus",
		name: "Disturbing Presence",
		description: `
			Creates faint, unsettling whispers audible to creatures within 10 feet.
		`
	},
	{
		rank: "1/4",
		type: "ability",
		sub: "Aberration",
		price: "Action",
		name: "Tentacle Slap",
		description: `
			Melee attack dealing 1d8 bludgeoning damage.
		`
	},
	{
		rank: "1/4",
		type: "ability",
		sub: "Aberration",
		price: "Action",
		name: "Tentacle Slap",
		description: `
			Melee attack dealing 1d8 bludgeoning damage.
		`
	},
	{
		rank: "1/4",
		type: "ability",
		sub: "Aberration",
		price: "Bonus",
		name: "Psychic Jolt",
		description: `
			Target within 30 feet takes 1d6 psychic damage (DC 11 Intelligence save for half).
		`
	}
];
// Global Session
const Session = {
	jsonbin: {},
	data: {},
	list: {},
	tab: "foo"
};

Session.jsonbin.bin = "67f28ae78a456b7966838378";
Session.jsonbin.url = "https://api.jsonbin.io/v3/b/67f28ae78a456b7966838378";
const setupCardsSection = function () {
	const cards = document.getElementById("all-cards");
	if (!cards) return;
	if (!G_Cards) return;
	cards.innerHTML = `<article> <section>`;
	G_Cards.forEach(function (c) {
		const card = {
			name: c.name || "foo",
			type: c.type || "item",
			sub: c.sub || "",
			rank: c.rank || "A",
			image: c.image || "",
			price: c.price || " ",
			description:
				c.description || "The quick brown fox jumped over the lazy dogs."
		};
		let cardInner = `
		<img src="${card.image}" alt="" class="card-image">
			<div class="card-description">
			<div>${card.description}</div>
			`;
		if (!card.image) {
			cardInner = `
			
		<img src="https://i.imgur.com/vslk57z.jpeg" alt="" class="card-image">
			<div class="card-image">
			<div class="card-description">
			<div>${card.description}</div>
			`;
		}

		// console.log("card: %o", card);
		cards.innerHTML += `
			<div class="card ${card.type}">
			<h2 class="card-rank">${card.rank}</h2>
			<h2 class="card-title">${card.name}</h2>
			<h3 class="card-type">${card.type}&nbsp;${card.sub}<br><code class="card-price">${card.price}</code></h3>
			${cardInner}
		</div></div>
			`;
	});
	cards.innerHTML += `</section> </article>`;
};

const getModifier = function (score) {
	// Ensure the score is a valid number
	if (typeof score !== "number" || score < 1) {
		// throw new Error("Score must be a number greater than or equal to 1.");
		return;
	}

	// Calculate the modifier using the D&D formula
	const modifier = Math.floor((score - 10) / 2);

	return modifier;
};

const beautifyJSON = function (data) {
	data = data || {};
	const beautifiedJSON = JSON.stringify(data, null, 4);
	// Process the beautified JSON to place each brace on its own line
	const formattedJSON = beautifiedJSON
		.replace(/{/g, "\n{") // Adds a newline before each opening brace
		.replace(/}/g, "\n}"); // Adds a newline before each closing brace
	return formattedJSON;
};

// GET data
const fetchData = function () {
	if (Session.tab !== "sheet") {
		return;
	}
	Session.useSampleData = true;
	if (Session.useSampleData) {
		Session.data = {
			record: {
				name: "Divine Machinations",
				characters: [
					{
						name: "Bob",
						race: "Human",
						dtp: 8,
						xp: 980,
						gp: 256,
						scores: {
							str: 20,
							dex: 7,
							con: 17,
							int: 13,
							wis: 11,
							cha: 9
						},
						unlocked: [
							{
								name: "Fighter Level 1"
							}
						],
						notes: "",
						inventory: [
							{
								name: "Abacus",
								type: "Short Sword",
								stone: 3,
								infusions: [
									{
										name: "Action Surge"
									}
								]
							}
						]
					},
					{
						name: "chuck"
					}
				]
			}
		};

		return; // Avoid hitting enpoints while still in development...
	}

	fetch(Session.jsonbin.url)
		.then((response) => response.json())
		.then((data) => {
			// console.log(data);
			Session.data = data;
		})
		.catch((error) => console.error("Error fetching JSON:", error));
};
const showTab = function (tabId) {
	// Hide all tab content
	const tabs = document.querySelectorAll(".tab-content");
	if (!tabs) return;
	// console.log("Tabs: %o", tabs);
	tabs.forEach((tab) => {
		tab.style.display = "none";
	});

	let element = document.getElementById(tabId);
	if (!element) return;
	// Show the selected tab
	document.getElementById(tabId).style.display = "block";
};

const generateUUID = function () {
	return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(
		/[xy]/g,
		function (char) {
			const random = (Math.random() * 16) | 0;
			const value = char === "x" ? random : (random & 0x3) | 0x8;
			return value.toString(16);
		}
	);
};

const characterUniqueString = function (character) {
	// console.log(beautifyJSON(character));
	return character.name + character.uuid;
};

// Update Sheet Tab With Data
const updatePage = function () {
	Session.active = Session.active || {};
	const dataElement = document.getElementById("my-data");
	const formattedJSON = beautifyJSON(Session.data);
	// console.log(formattedJSON);
	if (dataElement) {
		dataElement.innerHTML = formattedJSON;
	}

	const cListElement = document.getElementById("character-list");
	cListElement.innerHTML = "";
	Session.characters.forEach(function (char) {
		const uniqueId = characterUniqueString(char);
		const label = document.createElement("label");
		const button = document.createElement("button");

		button.textContent = `${char.name} the ${char.race} with ${char.gp} Gold Pieces`;
		button.addEventListener("click", function () {
			activate(uniqueId);
		});

		label.appendChild(button);
		cListElement.appendChild(label);
	});

	const character = Session.active;
	const sheetElement = document.getElementById("character-sheet");
	console.log("active: %o", Session.active);
	if (!(Session.active && Session.active.name)) {
		sheetElement.innerHTML = "";
		return;
	}
	sheetElement.innerHTML = `<h1 class="editable" onclick="this.contentEditable='true';"> name: ${Session.active.name} </h1>`;
	sheetElement.innerHTML += `<div class="stats"><div class="abilityScores">`;

	sheetElement.innerHTML += `<h4>
									<p class="score str"><br><strong>${Session.active.scores?.str}</strong> ${Session.active.mods?.str}</p> STR
								</h4>

								<h4>
									<p class="score dex"><br><strong>${Session.active.scores?.dex}</strong> ${Session.active.mods?.dex}</p> DEX
								</h4>

								<h4>
									<p class="score con"><br><strong>${Session.active.scores?.con}</strong> ${Session.active.mods?.con}</p> CON
								</h4>
									<h4>
										<p class="score int"><br><strong>${Session.active.scores?.int}</strong> ${Session.active.mods?.int}</p> INT
									</h4>

									<h4>
										<p class="score wis"><br><strong>${Session.active.scores?.wis}</strong> ${Session.active.mods?.wis}</p> WIS
									</h4>

									<h4>
										<p class="score cha"><br><strong>${Session.active.scores?.cha}</strong> ${Session.active.mods?.cha}</p> CHA
	</h4>
	`;
	sheetElement.innerHTML += `</div></div>`;
	sheetElement.innerHTML += `<h2 class="editable" onclick="this.contentEditable='true';"> race: ${Session.active.race} </h2>`;
	sheetElement.innerHTML += `<span class="editable" onclick="this.contentEditable='true';"> dtp: ${Session.active.dtp} </span> &nbsp;&nbsp;&nbsp;&nbsp;`;
	sheetElement.innerHTML += `<span class="editable" onclick="this.contentEditable='true';"> xp: ${Session.active.xp} </span> &nbsp;&nbsp;&nbsp;&nbsp;`;
	sheetElement.innerHTML += `<span class="editable" onclick="this.contentEditable='true';"> gp: ${Session.active.gp} </span>`;

	sheetElement.innerHTML += `<hr>`;
};

const getData = function () {
	if (Session.tab !== "sheet") {
		console.log("Not sheet, no need to fetch data...");
		return;
	}
	// ZBEYER there might be a way to optimize this to avoid redundant calls:
	fetchData();
	const data = Session.data || {};
	const characters = data.record?.characters || [];
	// Data may be incomplete, when we set up a character we set values if they exist or use defaults.
	Session.characters = characters.map((char) => ({
		name: char.name || "",
		race: char.race || "Human",
		xp: char.xp || 0,
		gp: char.gp || 0,
		dtp: char.dtp || 0,
		scores: {
			str: char.scores?.str || 10,
			dex: char.scores?.dex || 10,
			con: char.scores?.con || 10,
			int: char.scores?.int || 10,
			wis: char.scores?.wis || 10,
			cha: char.scores?.cha || 10
		},
		mods: {
			str: getModifier(char.scores?.str) || 0,
			dex: getModifier(char.scores?.dex) || 0,
			con: getModifier(char.scores?.con) || 0,
			int: getModifier(char.scores?.int) || 0,
			wis: getModifier(char.scores?.wis) || 0,
			cha: getModifier(char.scores?.cha) || 0
		},
		unlocked: char.unlocked || [],
		notes: char.notes || "",
		inventory: char.inventory || [],
		uuid: generateUUID()
	}));
	updatePage();
};

// function tab(tabId) {
// 	Session.tab = tabId;
// 	getData();
// 	// console.log("Tabbing to: %o", tabId);
// 	showTab(tabId);
// 	showTab(Session.tab);
// }

function activate(idString) {
	// console.log("Activate %o", idString);
	Session.characters.forEach(function (char) {
		if (characterUniqueString(char) === idString) {
			Session.active = char;
			updatePage();
			return;
		}
	});
}

document.addEventListener("DOMContentLoaded", function () {
	// console.log("G_Cards: %o", G_Cards);
	setupCardsSection();
});

// tab(Session.tab);

// import { Template } from 'meteor/templating';
// import { ReactiveVar } from 'meteor/reactive-var';
//
// import './main.html';
//
// Template.hello.onCreated(function helloOnCreated() {
//   // counter starts at 0
//   this.counter = new ReactiveVar(0);
// });
//
// Template.hello.helpers({
//   counter() {
//     return Template.instance().counter.get();
//   },
// });
//
// Template.hello.events({
//   'click button'(event, instance) {
//     // increment the counter when button is clicked
//     instance.counter.set(instance.counter.get() + 1);
//   },
// });
